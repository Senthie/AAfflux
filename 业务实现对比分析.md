# å¹³å°æ ¸å¿ƒå¼•æ“ä¸šåŠ¡å®ç°å¯¹æ¯”åˆ†æ

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£å¯¹æ¯”åˆ†æå›¾ä¸­æå‡ºçš„"å¹³å°æ ¸å¿ƒå¼•æ“è®¾è®¡"ä¸šåŠ¡éœ€æ±‚ä¸å½“å‰ AAfflux é¡¹ç›®çš„å®ç°æƒ…å†µï¼Œè¯†åˆ«å·²å®ç°åŠŸèƒ½ã€æœªå®ç°åŠŸèƒ½å’Œæ½œåœ¨å†²çªï¼Œå¹¶æä¾›å®ç°è·¯çº¿å›¾ã€‚

---

## ğŸ¯ å›¾ä¸­ä¸šåŠ¡éœ€æ±‚æ¦‚è§ˆ

æ ¹æ®æä¾›çš„å›¾ç‰‡ï¼Œå¹³å°æ ¸å¿ƒå¼•æ“è®¾è®¡åŒ…å«ä»¥ä¸‹å››å¤§æ¨¡å—ï¼š

### ç¬¬å››éƒ¨åˆ†ï¼šå¹³å°æ ¸å¿ƒå¼•æ“è®¾è®¡

#### 4.1 å…ƒæ•°æ®é©±åŠ¨å¼•æ“
- **4.1.1 ç»Ÿä¸€å…ƒæ•°æ®æ¨¡å‹è®¾è®¡**
- **4.1.2 å…ƒæ•°æ®çš„è§£æä¸åŠ è½½æœºåˆ¶**

#### 4.2 æ¨¡å‹é©±åŠ¨å¼•æ“
- **4.2.1 DDL åŒæ­¥æœºåˆ¶ï¼ˆæ ¹æ®æ¨¡å‹å®šä¹‰åˆ›å»º/ä¿®æ”¹æ•°æ®åº“è¡¨ï¼‰**
- **4.2.2 åŠ¨æ€æ•°æ®æŒä¹…åŒ–ä¸æŸ¥è¯¢æ¥å£ï¼ˆORM/SQL ç”Ÿæˆï¼‰**

#### 4.3 æ¸²æŸ“å¼•æ“
- **4.3.1 å‰ç«¯è¿è¡Œæ—¶æ¸²æŸ“åŸç†ï¼ˆæ ¹æ® JSON æ¸²æŸ“ Vue/React ç»„ä»¶ï¼‰**
- **4.3.2 å¤šç«¯æ¸²æŸ“é€‚é…ï¼ˆWeb, H5, å°ç¨‹åºï¼‰**

#### 4.4 æµç¨‹å¼•æ“ï¼ˆBPMNï¼‰
- **4.4.1 ä¸ Activiti / Flowable / Camunda çš„é›†æˆæˆ–è‡ªç ”è®¾è®¡**
- **4.4.2 ç”¨æˆ·ä»»åŠ¡ä¸æƒé™çš„å¯¹æ¥**
- **4.4.3 å¼‚æ­¥ä¸äº‹åŠ¡å¤„ç†**

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ•°æ®å­˜å‚¨è®¾è®¡

#### 3.4 æ•°æ®å­˜å‚¨è®¾è®¡
- **3.4.1 å…ƒæ•°æ®æ•°æ®åº“** - å­˜å‚¨åº”ç”¨ã€é¡µé¢ã€æ¨¡å‹ã€æµç¨‹å®šä¹‰ä¿¡æ¯ï¼ˆå»ºè®®ï¼šå…³ç³»å‹æ•°æ®åº“ï¼‰
- **3.4.2 è¿è¡Œæ—¶æ•°æ®åº“** - ç”±å¹³å°åŠ¨æ€åˆ›å»ºï¼Œå­˜å‚¨ç”¨æˆ·é€šè¿‡åº”ç”¨äº§ç”Ÿçš„ä¸šåŠ¡æ•°æ®ï¼ˆå¯ç”±ç§Ÿæˆ·é€‰æ‹©æˆ–å¹³å°ç»Ÿä¸€ç®¡ç†ï¼‰
- **3.4.3 ç¼“å­˜è®¾è®¡** - å…ƒæ•°æ®ç¼“å­˜ã€ä¼šè¯ç¼“å­˜ï¼ˆä½¿ç”¨ Redisï¼‰
- **3.4.4 æ–‡ä»¶å­˜å‚¨** - ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼ˆå¦‚ï¼šAWS S3, MinIOï¼‰å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶

---

## âœ… å½“å‰é¡¹ç›®å·²å®ç°çš„ä¸šåŠ¡åŠŸèƒ½

### 1. æ•°æ®å­˜å‚¨è®¾è®¡ï¼ˆ3.4ï¼‰- å·²å®Œæ•´å®ç° âœ…

| éœ€æ±‚é¡¹ | å®ç°çŠ¶æ€ | å®ç°æ–¹å¼ | æ–‡ä»¶ä½ç½® |
|--------|---------|---------|---------|
| **3.4.1 å…ƒæ•°æ®æ•°æ®åº“** | âœ… å·²å®ç° | PostgreSQL + SQLModelï¼Œ37å¼ è¡¨ | `api/app/models/` |
| **3.4.2 è¿è¡Œæ—¶æ•°æ®åº“** | âœ… å·²å®ç° | å¤šç§Ÿæˆ·æ¶æ„ï¼ˆworkspace_idéš”ç¦»ï¼‰ | `api/app/models/tenant/` |
| **3.4.3 ç¼“å­˜è®¾è®¡** | âœ… å·²å®ç° | Redisï¼ˆå…ƒæ•°æ®ç¼“å­˜ã€ä¼šè¯ç¼“å­˜ï¼‰ | `api/app/core/redis.py` |
| **3.4.4 æ–‡ä»¶å­˜å‚¨** | âœ… å·²å®ç° | MongoDB GridFSï¼ˆå¯æ‰©å±•åˆ° S3/MinIOï¼‰ | `api/app/models/file/service.py` |

**è¯¦ç»†è¯´æ˜ï¼š**

#### 3.4.1 å…ƒæ•°æ®æ•°æ®åº“ âœ…
- **å®ç°æ–¹å¼**ï¼šPostgreSQL + SQLModel
- **è¡¨ç»“æ„**ï¼š37å¼ æ ¸å¿ƒè¡¨ï¼ŒæŒ‰11ä¸ªä¸šåŠ¡åŸŸåˆ†ç»„
  - è®¤è¯åŸŸï¼ˆ4å¼ è¡¨ï¼‰ï¼šUser, RefreshToken, PasswordReset, APIKey
  - ç§Ÿæˆ·åŸŸï¼ˆ5å¼ è¡¨ï¼‰ï¼šOrganization, Team, Workspace, TeamMember, TeamInvitation
  - å·¥ä½œæµåŸŸï¼ˆ5å¼ è¡¨ï¼‰ï¼šWorkflow, Node, Connection, ExecutionRecord, NodeExecutionResult
  - åº”ç”¨åŸŸï¼ˆ4å¼ è¡¨ï¼‰ï¼šApplication, LLMProvider, PromptTemplate, PromptTemplateVersion
  - å¯¹è¯åŸŸï¼ˆ5å¼ è¡¨ï¼‰ï¼šConversation, Message, MessageAnnotation, MessageFeedback, EndUser
  - çŸ¥è¯†åº“åŸŸï¼ˆ4å¼ è¡¨ï¼‰ï¼šDataset, Document, DocumentSegment, DatasetApplicationJoin
  - æ’ä»¶åŸŸï¼ˆ2å¼ è¡¨ï¼‰ï¼šPlugin, InstalledPlugin
  - BPMåŸŸï¼ˆ6å¼ è¡¨ï¼‰ï¼šProcessDefinition, ProcessInstance, Task, Approval, FormDefinition, FormData
  - è®¡è´¹åŸŸï¼ˆ2å¼ è¡¨ï¼‰ï¼šSubscription, UsageRecord
  - æ–‡ä»¶åŸŸï¼ˆ1å¼ è¡¨ï¼‰ï¼šFileReference
  - å®¡è®¡åŸŸï¼ˆ1å¼ è¡¨ï¼‰ï¼šAuditLog

#### 3.4.2 è¿è¡Œæ—¶æ•°æ®åº“ âœ…
- **å®ç°æ–¹å¼**ï¼šå¤šç§Ÿæˆ·æ¶æ„ï¼Œé€šè¿‡ `workspace_id` å®ç°æ•°æ®éš”ç¦»
- **ç§Ÿæˆ·å±‚çº§**ï¼šOrganization â†’ Team â†’ Workspaceï¼ˆä¸‰å±‚éš”ç¦»ï¼‰
- **æ•°æ®éš”ç¦»**ï¼šæ‰€æœ‰ä¸šåŠ¡è¡¨éƒ½åŒ…å« `workspace_id` å­—æ®µ
- **ç§Ÿæˆ·ä¸Šä¸‹æ–‡**ï¼šJWT + Headerï¼ˆX-Workspace-IDï¼‰+ RediséªŒè¯

#### 3.4.3 ç¼“å­˜è®¾è®¡ âœ…
- **å®ç°æ–¹å¼**ï¼šRedis
- **é…ç½®æ–‡ä»¶**ï¼š`api/app/core/redis.py`
- **ç”¨é€”**ï¼š
  - å…ƒæ•°æ®ç¼“å­˜ï¼ˆå·¥ä½œæµå®šä¹‰ã€åº”ç”¨é…ç½®ç­‰ï¼‰
  - ä¼šè¯ç¼“å­˜ï¼ˆç”¨æˆ·ä¼šè¯ã€ç§Ÿæˆ·ä¸Šä¸‹æ–‡ï¼‰
  - æƒé™ç¼“å­˜ï¼ˆç”¨æˆ·æƒé™ã€è§’è‰²ï¼‰
  - é…é¢ç¼“å­˜ï¼ˆè®¢é˜…é™åˆ¶ã€ç”¨é‡ç»Ÿè®¡ï¼‰

#### 3.4.4 æ–‡ä»¶å­˜å‚¨ âœ…
- **å®ç°æ–¹å¼**ï¼šMongoDB GridFS
- **é…ç½®æ–‡ä»¶**ï¼š`api/app/core/mongodb.py`
- **æœåŠ¡ç±»**ï¼š`api/app/models/file/service.py`
- **åŠŸèƒ½**ï¼š
  - æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½
  - æ–‡ä»¶å…ƒæ•°æ®ç®¡ç†ï¼ˆFileReferenceè¡¨ï¼‰
  - æ”¯æŒå¤§æ–‡ä»¶åˆ†å—å­˜å‚¨
  - å¯æ‰©å±•åˆ° AWS S3 / MinIO

---

### 2. æµç¨‹å¼•æ“ï¼ˆ4.4ï¼‰- å·²éƒ¨åˆ†å®ç° âœ…

| éœ€æ±‚é¡¹ | å®ç°çŠ¶æ€ | å®ç°æ–¹å¼ | æ–‡ä»¶ä½ç½® |
|--------|---------|---------|---------|
| **4.4.1 BPMNå¼•æ“é›†æˆ** | âš ï¸ è‡ªç ”åŸºç¡€ç‰ˆ | è‡ªç ”BPMå¼•æ“ï¼ˆ6å¼ è¡¨ï¼‰ | `api/app/models/bpm/` |
| **4.4.2 ç”¨æˆ·ä»»åŠ¡ä¸æƒé™** | âœ… å·²å®ç° | Taskåˆ†é…ã€è®¤é¢†ã€å®Œæˆæœºåˆ¶ | `api/app/services/bpm_task_service.py` |
| **4.4.3 å¼‚æ­¥ä¸äº‹åŠ¡å¤„ç†** | âš ï¸ éƒ¨åˆ†å®ç° | Celeryå¼‚æ­¥ä»»åŠ¡ | `api/app/core/celery.py` |

**è¯¦ç»†è¯´æ˜ï¼š**

#### 4.4.1 BPMNå¼•æ“é›†æˆ âš ï¸
- **å½“å‰çŠ¶æ€**ï¼šè‡ªç ”åŸºç¡€ç‰ˆBPMå¼•æ“
- **å®ç°å†…å®¹**ï¼š
  - æµç¨‹å®šä¹‰å’Œç‰ˆæœ¬æ§åˆ¶ï¼ˆProcessDefinitionï¼‰
  - æµç¨‹å®ä¾‹ç®¡ç†ï¼ˆProcessInstanceï¼‰
  - ä»»åŠ¡ç®¡ç†ï¼ˆTaskï¼‰
  - å®¡æ‰¹æµç¨‹ï¼ˆApprovalï¼‰
  - è¡¨å•ç®¡ç†ï¼ˆFormDefinition, FormDataï¼‰
- **æ‰§è¡Œå¼•æ“**ï¼š
  - `api/app/engine/bpm/executor.py` - æµç¨‹æ‰§è¡Œå™¨
  - `api/app/engine/bpm/task_dispatcher.py` - ä»»åŠ¡åˆ†å‘å™¨
- **APIæ¥å£**ï¼š
  - `/api/v1/bpm/processes/` - æµç¨‹ç®¡ç†
  - `/api/v1/bpm/tasks/` - ä»»åŠ¡ç®¡ç†
  - `/api/v1/bpm/approvals/` - å®¡æ‰¹ç®¡ç†
- **å±€é™æ€§**ï¼š
  - âŒ æœªå®ç°å®Œæ•´çš„BPMN 2.0è§„èŒƒ
  - âŒ æœªé›†æˆActiviti/Flowable/Camunda
  - âŒ ç¼ºå°‘å¯è§†åŒ–æµç¨‹è®¾è®¡å™¨
  - âŒ ç¼ºå°‘å¤æ‚ç½‘å…³ï¼ˆå¹¶è¡Œç½‘å…³ã€æ’ä»–ç½‘å…³ç­‰ï¼‰

#### 4.4.2 ç”¨æˆ·ä»»åŠ¡ä¸æƒé™ âœ…
- **ä»»åŠ¡åˆ†é…**ï¼šæ”¯æŒæŒ‡å®šç”¨æˆ·ã€è§’è‰²ã€å›¢é˜Ÿ
- **ä»»åŠ¡è®¤é¢†**ï¼šæ”¯æŒä»»åŠ¡æ± å’Œè®¤é¢†æœºåˆ¶
- **ä»»åŠ¡å®Œæˆ**ï¼šæ”¯æŒä»»åŠ¡å®Œæˆå’Œç»“æœæäº¤
- **æƒé™æ§åˆ¶**ï¼šåŸºäºç§Ÿæˆ·ä¸Šä¸‹æ–‡çš„æƒé™éªŒè¯

#### 4.4.3 å¼‚æ­¥ä¸äº‹åŠ¡å¤„ç† âš ï¸
- **å¼‚æ­¥ä»»åŠ¡**ï¼šCeleryé…ç½®å®Œæˆï¼ˆ`api/app/core/celery.py`ï¼‰
- **ä»»åŠ¡é˜Ÿåˆ—**ï¼šRedisä½œä¸ºæ¶ˆæ¯ä»£ç†
- **äº‹åŠ¡å¤„ç†**ï¼šSQLModeläº‹åŠ¡æ”¯æŒ
- **å±€é™æ€§**ï¼š
  - âŒ ç¼ºå°‘åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼ˆSagaæ¨¡å¼ï¼‰
  - âŒ ç¼ºå°‘è¡¥å¿æœºåˆ¶
  - âŒ ç¼ºå°‘é•¿äº‹åŠ¡ç®¡ç†

---

## âŒ å½“å‰é¡¹ç›®æœªå®ç°çš„ä¸šåŠ¡åŠŸèƒ½

### 1. å…ƒæ•°æ®é©±åŠ¨å¼•æ“ï¼ˆ4.1ï¼‰- æœªå®ç° âŒ

| éœ€æ±‚é¡¹ | å®ç°çŠ¶æ€ | ç¼ºå¤±å†…å®¹ |
|--------|---------|---------|
| **4.1.1 ç»Ÿä¸€å…ƒæ•°æ®æ¨¡å‹è®¾è®¡** | âŒ æœªå®ç° | ç¼ºå°‘ç»Ÿä¸€çš„å…ƒæ•°æ®æ¨¡å‹å®šä¹‰ç³»ç»Ÿ |
| **4.1.2 å…ƒæ•°æ®è§£æä¸åŠ è½½æœºåˆ¶** | âŒ æœªå®ç° | ç¼ºå°‘åŠ¨æ€è§£æå’ŒåŠ è½½å…ƒæ•°æ®çš„å¼•æ“ |

**è¯¦ç»†è¯´æ˜ï¼š**

#### 4.1.1 ç»Ÿä¸€å…ƒæ•°æ®æ¨¡å‹è®¾è®¡ âŒ
**éœ€æ±‚æè¿°**ï¼š
- å®šä¹‰ç»Ÿä¸€çš„å…ƒæ•°æ®æ¨¡å‹ï¼Œæè¿°åº”ç”¨ã€é¡µé¢ã€è¡¨å•ã€å­—æ®µã€è§„åˆ™ç­‰
- å…ƒæ•°æ®åº”è¯¥æ˜¯å¯é…ç½®ã€å¯æ‰©å±•çš„
- æ”¯æŒå…ƒæ•°æ®ç‰ˆæœ¬æ§åˆ¶å’Œç»§æ‰¿

**å½“å‰ç¼ºå¤±**ï¼š
- âŒ æ²¡æœ‰ç»Ÿä¸€çš„å…ƒæ•°æ®æ¨¡å‹å®šä¹‰
- âŒ æ²¡æœ‰å…ƒæ•°æ®æè¿°è¯­è¨€ï¼ˆå¦‚JSON Schemaï¼‰
- âŒ æ²¡æœ‰å…ƒæ•°æ®æ³¨å†Œä¸­å¿ƒ
- âŒ æ²¡æœ‰å…ƒæ•°æ®ç‰ˆæœ¬ç®¡ç†

**å½±å“**ï¼š
- æ— æ³•é€šè¿‡é…ç½®å¿«é€Ÿåˆ›å»ºåº”ç”¨
- æ— æ³•å®ç°çœŸæ­£çš„ä½ä»£ç å¹³å°
- åº”ç”¨ç»“æ„å›ºåŒ–ï¼Œæ‰©å±•æ€§å·®

#### 4.1.2 å…ƒæ•°æ®è§£æä¸åŠ è½½æœºåˆ¶ âŒ
**éœ€æ±‚æè¿°**ï¼š
- è¿è¡Œæ—¶åŠ¨æ€è§£æå…ƒæ•°æ®
- æ ¹æ®å…ƒæ•°æ®ç”Ÿæˆåº”ç”¨ç»“æ„
- æ”¯æŒçƒ­åŠ è½½å’Œçƒ­æ›´æ–°

**å½“å‰ç¼ºå¤±**ï¼š
- âŒ æ²¡æœ‰å…ƒæ•°æ®è§£æå™¨
- âŒ æ²¡æœ‰å…ƒæ•°æ®åŠ è½½å™¨
- âŒ æ²¡æœ‰å…ƒæ•°æ®ç¼“å­˜ç­–ç•¥
- âŒ æ²¡æœ‰å…ƒæ•°æ®å˜æ›´ç›‘å¬æœºåˆ¶

**å½±å“**ï¼š
- æ— æ³•å®ç°é…ç½®é©±åŠ¨çš„åº”ç”¨ç”Ÿæˆ
- æ— æ³•æ”¯æŒåº”ç”¨çš„åŠ¨æ€æ›´æ–°
- æ— æ³•å®ç°åº”ç”¨çš„å¿«é€Ÿè¿­ä»£

---

### 2. æ¨¡å‹é©±åŠ¨å¼•æ“ï¼ˆ4.2ï¼‰- æœªå®ç° âŒ

| éœ€æ±‚é¡¹ | å®ç°çŠ¶æ€ | ç¼ºå¤±å†…å®¹ |
|--------|---------|---------|
| **4.2.1 DDLåŒæ­¥æœºåˆ¶** | âŒ æœªå®ç° | ç¼ºå°‘æ ¹æ®æ¨¡å‹å®šä¹‰è‡ªåŠ¨åˆ›å»º/ä¿®æ”¹æ•°æ®åº“è¡¨çš„æœºåˆ¶ |
| **4.2.2 åŠ¨æ€æ•°æ®æŒä¹…åŒ–ä¸æŸ¥è¯¢æ¥å£** | âŒ æœªå®ç° | ç¼ºå°‘åŠ¨æ€ç”ŸæˆORM/SQLçš„èƒ½åŠ› |

**è¯¦ç»†è¯´æ˜ï¼š**

#### 4.2.1 DDLåŒæ­¥æœºåˆ¶ âŒ
**éœ€æ±‚æè¿°**ï¼š
- æ ¹æ®å…ƒæ•°æ®æ¨¡å‹å®šä¹‰è‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“è¡¨ç»“æ„
- æ”¯æŒè¡¨ç»“æ„çš„åŠ¨æ€ä¿®æ”¹ï¼ˆå¢åŠ å­—æ®µã€ä¿®æ”¹ç±»å‹ç­‰ï¼‰
- æ”¯æŒå¤šç§Ÿæˆ·çš„è¡¨éš”ç¦»ç­–ç•¥
- æ”¯æŒæ•°æ®åº“è¿ç§»å’Œç‰ˆæœ¬æ§åˆ¶

**å½“å‰ç¼ºå¤±**ï¼š
- âŒ æ²¡æœ‰åŠ¨æ€DDLç”Ÿæˆå™¨
- âŒ æ²¡æœ‰è¡¨ç»“æ„åŒæ­¥æœºåˆ¶
- âŒ æ²¡æœ‰å­—æ®µç±»å‹æ˜ å°„è§„åˆ™
- âŒ æ²¡æœ‰è¡¨ç»“æ„å˜æ›´ç®¡ç†
- âŒ åªæœ‰é™æ€çš„Alembicè¿ç§»è„šæœ¬

**å½±å“**ï¼š
- æ— æ³•æ ¹æ®é…ç½®åŠ¨æ€åˆ›å»ºä¸šåŠ¡è¡¨
- ç§Ÿæˆ·æ— æ³•è‡ªå®šä¹‰æ•°æ®æ¨¡å‹
- è¡¨ç»“æ„å˜æ›´éœ€è¦æ‰‹åŠ¨ç¼–å†™è¿ç§»è„šæœ¬
- æ— æ³•å®ç°çœŸæ­£çš„æ¨¡å‹é©±åŠ¨å¼€å‘

#### 4.2.2 åŠ¨æ€æ•°æ®æŒä¹…åŒ–ä¸æŸ¥è¯¢æ¥å£ âŒ
**éœ€æ±‚æè¿°**ï¼š
- æ ¹æ®å…ƒæ•°æ®æ¨¡å‹åŠ¨æ€ç”ŸæˆCRUDæ¥å£
- æ”¯æŒå¤æ‚æŸ¥è¯¢ï¼ˆè¿‡æ»¤ã€æ’åºã€åˆ†é¡µã€å…³è”æŸ¥è¯¢ï¼‰
- æ”¯æŒæ•°æ®éªŒè¯å’Œä¸šåŠ¡è§„åˆ™
- è‡ªåŠ¨ç”ŸæˆRESTful API

**å½“å‰ç¼ºå¤±**ï¼š
- âŒ æ²¡æœ‰åŠ¨æ€ORMç”Ÿæˆå™¨
- âŒ æ²¡æœ‰é€šç”¨çš„CRUDæœåŠ¡
- âŒ æ²¡æœ‰æŸ¥è¯¢æ„å»ºå™¨ï¼ˆQuery Builderï¼‰
- âŒ æ²¡æœ‰åŠ¨æ€APIç”Ÿæˆå™¨
- âŒ æ‰€æœ‰APIéƒ½æ˜¯æ‰‹åŠ¨ç¼–å†™çš„

**å½±å“**ï¼š
- æ¯ä¸ªä¸šåŠ¡å®ä½“éƒ½éœ€è¦æ‰‹åŠ¨ç¼–å†™CRUDä»£ç 
- æ— æ³•å¿«é€Ÿå“åº”ä¸šåŠ¡éœ€æ±‚å˜åŒ–
- ä»£ç é‡å¤åº¦é«˜ï¼Œç»´æŠ¤æˆæœ¬å¤§
- æ— æ³•å®ç°é…ç½®åŒ–çš„æ•°æ®è®¿é—®

---

### 3. æ¸²æŸ“å¼•æ“ï¼ˆ4.3ï¼‰- æœªå®ç° âŒ

| éœ€æ±‚é¡¹ | å®ç°çŠ¶æ€ | ç¼ºå¤±å†…å®¹ |
|--------|---------|---------|
| **4.3.1 å‰ç«¯è¿è¡Œæ—¶æ¸²æŸ“åŸç†** | âŒ æœªå®ç° | ç¼ºå°‘æ ¹æ®JSONæ¸²æŸ“Vue/Reactç»„ä»¶çš„å¼•æ“ |
| **4.3.2 å¤šç«¯æ¸²æŸ“é€‚é…** | âŒ æœªå®ç° | ç¼ºå°‘Web/H5/å°ç¨‹åºçš„å¤šç«¯é€‚é… |

**è¯¦ç»†è¯´æ˜ï¼š**

#### 4.3.1 å‰ç«¯è¿è¡Œæ—¶æ¸²æŸ“åŸç† âŒ
**éœ€æ±‚æè¿°**ï¼š
- æ ¹æ®JSONé…ç½®åŠ¨æ€æ¸²æŸ“Vue/Reactç»„ä»¶
- æ”¯æŒç»„ä»¶çš„åµŒå¥—å’Œç»„åˆ
- æ”¯æŒäº‹ä»¶ç»‘å®šå’Œæ•°æ®ç»‘å®š
- æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶æ³¨å†Œ

**å½“å‰ç¼ºå¤±**ï¼š
- âŒ æ²¡æœ‰JSON Schemaåˆ°ç»„ä»¶çš„æ˜ å°„è§„åˆ™
- âŒ æ²¡æœ‰åŠ¨æ€ç»„ä»¶æ¸²æŸ“å™¨
- âŒ æ²¡æœ‰ç»„ä»¶æ³¨å†Œä¸­å¿ƒ
- âŒ æ²¡æœ‰è¿è¡Œæ—¶è¡¨è¾¾å¼è§£æå™¨
- âŒ å‰ç«¯åªæœ‰é™æ€çš„Vue 3ç»„ä»¶

**å½±å“**ï¼š
- æ— æ³•é€šè¿‡é…ç½®ç”Ÿæˆé¡µé¢
- é¡µé¢ç»“æ„å›ºåŒ–ï¼Œæ— æ³•åŠ¨æ€è°ƒæ•´
- æ— æ³•å®ç°æ‹–æ‹½å¼é¡µé¢è®¾è®¡å™¨
- æ— æ³•å®ç°ä½ä»£ç çš„å‰ç«¯å¼€å‘

#### 4.3.2 å¤šç«¯æ¸²æŸ“é€‚é… âŒ
**éœ€æ±‚æè¿°**ï¼š
- åŒä¸€ä»½é…ç½®é€‚é…Webã€H5ã€å°ç¨‹åº
- æ”¯æŒå“åº”å¼å¸ƒå±€
- æ”¯æŒå¹³å°ç‰¹æ€§å·®å¼‚å¤„ç†
- æ”¯æŒä¸»é¢˜å’Œæ ·å¼å®šåˆ¶

**å½“å‰ç¼ºå¤±**ï¼š
- âŒ æ²¡æœ‰å¤šç«¯æ¸²æŸ“é€‚é…å™¨
- âŒ æ²¡æœ‰å¹³å°å·®å¼‚æŠ½è±¡å±‚
- âŒ æ²¡æœ‰å“åº”å¼å¸ƒå±€å¼•æ“
- âŒ åªæ”¯æŒWebç«¯ï¼ˆQuasarï¼‰

**å½±å“**ï¼š
- æ— æ³•ä¸€æ¬¡å¼€å‘å¤šç«¯éƒ¨ç½²
- éœ€è¦ä¸ºæ¯ä¸ªå¹³å°å•ç‹¬å¼€å‘
- ç»´æŠ¤æˆæœ¬é«˜
- æ— æ³•å¿«é€Ÿå“åº”å¤šç«¯éœ€æ±‚

---

## âš ï¸ æ½œåœ¨å†²çªå’Œéœ€è¦è°ƒæ•´çš„åœ°æ–¹

### 1. æ¶æ„ç†å¿µå†²çª

| å†²çªç‚¹ | å½“å‰å®ç° | å›¾ä¸­éœ€æ±‚ | å»ºè®® |
|--------|---------|---------|------|
| **å¼€å‘æ¨¡å¼** | ä»£ç é©±åŠ¨ï¼ˆCode-Firstï¼‰ | é…ç½®é©±åŠ¨ï¼ˆConfig-Firstï¼‰ | éœ€è¦é‡å¤§æ¶æ„è°ƒæ•´ |
| **æ•°æ®æ¨¡å‹** | é™æ€æ¨¡å‹ï¼ˆSQLModelï¼‰ | åŠ¨æ€æ¨¡å‹ï¼ˆå…ƒæ•°æ®é©±åŠ¨ï¼‰ | éœ€è¦å¼•å…¥å…ƒæ•°æ®å±‚ |
| **APIç”Ÿæˆ** | æ‰‹åŠ¨ç¼–å†™ | è‡ªåŠ¨ç”Ÿæˆ | éœ€è¦å¼€å‘APIç”Ÿæˆå™¨ |
| **å‰ç«¯æ¸²æŸ“** | é™æ€ç»„ä»¶ | åŠ¨æ€æ¸²æŸ“ | éœ€è¦å¼€å‘æ¸²æŸ“å¼•æ“ |

**è¯¦ç»†è¯´æ˜ï¼š**

#### å†²çª1ï¼šä»£ç é©±åŠ¨ vs é…ç½®é©±åŠ¨
**å½“å‰å®ç°**ï¼š
- æ‰€æœ‰æ¨¡å‹éƒ½æ˜¯æ‰‹åŠ¨ç¼–å†™çš„Pythonç±»
- æ‰€æœ‰APIéƒ½æ˜¯æ‰‹åŠ¨ç¼–å†™çš„FastAPIè·¯ç”±
- æ‰€æœ‰å‰ç«¯ç»„ä»¶éƒ½æ˜¯æ‰‹åŠ¨ç¼–å†™çš„Vueç»„ä»¶

**å›¾ä¸­éœ€æ±‚**ï¼š
- é€šè¿‡å…ƒæ•°æ®é…ç½®å®šä¹‰æ¨¡å‹
- é€šè¿‡é…ç½®è‡ªåŠ¨ç”ŸæˆAPI
- é€šè¿‡JSONé…ç½®æ¸²æŸ“å‰ç«¯

**å†²çªå½±å“**ï¼š
- ä¸¤ç§æ¨¡å¼çš„è®¾è®¡ç†å¿µå®Œå…¨ä¸åŒ
- éœ€è¦é‡æ–°è®¾è®¡æ•´ä½“æ¶æ„
- ç°æœ‰ä»£ç å¯èƒ½éœ€è¦å¤§é‡é‡æ„

**å»ºè®®æ–¹æ¡ˆ**ï¼š
1. **æ··åˆæ¨¡å¼**ï¼šä¿ç•™æ ¸å¿ƒæ¨¡å‹çš„ä»£ç é©±åŠ¨ï¼Œä¸šåŠ¡æ¨¡å‹é‡‡ç”¨é…ç½®é©±åŠ¨
2. **åˆ†å±‚æ¶æ„**ï¼š
   - åº•å±‚ï¼šä»£ç é©±åŠ¨çš„æ ¸å¿ƒæ¨¡å‹ï¼ˆç”¨æˆ·ã€ç§Ÿæˆ·ã€å·¥ä½œæµç­‰ï¼‰
   - ä¸­å±‚ï¼šå…ƒæ•°æ®é©±åŠ¨çš„ä¸šåŠ¡æ¨¡å‹ï¼ˆå¯é…ç½®ï¼‰
   - ä¸Šå±‚ï¼šåŠ¨æ€ç”Ÿæˆçš„APIå’Œå‰ç«¯

#### å†²çª2ï¼šé™æ€è¡¨ç»“æ„ vs åŠ¨æ€è¡¨ç»“æ„
**å½“å‰å®ç°**ï¼š
- 37å¼ å›ºå®šçš„æ•°æ®åº“è¡¨
- é€šè¿‡Alembicç®¡ç†è¡¨ç»“æ„å˜æ›´
- è¡¨ç»“æ„åœ¨ä»£ç ä¸­å®šä¹‰

**å›¾ä¸­éœ€æ±‚**ï¼š
- æ ¹æ®å…ƒæ•°æ®åŠ¨æ€åˆ›å»ºè¡¨
- æ”¯æŒç§Ÿæˆ·è‡ªå®šä¹‰å­—æ®µ
- æ”¯æŒè¡¨ç»“æ„çš„è¿è¡Œæ—¶ä¿®æ”¹

**å†²çªå½±å“**ï¼š
- å½“å‰çš„è¡¨ç»“æ„æ— æ³•åŠ¨æ€æ‰©å±•
- ç§Ÿæˆ·æ— æ³•è‡ªå®šä¹‰æ•°æ®æ¨¡å‹
- æ— æ³•å®ç°çœŸæ­£çš„ä½ä»£ç å¹³å°

**å»ºè®®æ–¹æ¡ˆ**ï¼š
1. **åŒå±‚è¡¨ç»“æ„**ï¼š
   - ç³»ç»Ÿè¡¨ï¼šå›ºå®šçš„37å¼ è¡¨ï¼ˆå½“å‰å®ç°ï¼‰
   - ä¸šåŠ¡è¡¨ï¼šåŠ¨æ€åˆ›å»ºçš„ç§Ÿæˆ·ä¸šåŠ¡è¡¨ï¼ˆæ–°å¢ï¼‰
2. **å…ƒæ•°æ®è¡¨**ï¼šæ–°å¢å…ƒæ•°æ®è¡¨æ¥æè¿°åŠ¨æ€è¡¨ç»“æ„
3. **EAVæ¨¡å¼**ï¼šå¯¹äºé«˜åº¦åŠ¨æ€çš„åœºæ™¯ï¼Œè€ƒè™‘ä½¿ç”¨EAVï¼ˆå®ä½“-å±æ€§-å€¼ï¼‰æ¨¡å¼

---

### 2. åŠŸèƒ½è¾¹ç•Œå†²çª

| å†²çªç‚¹ | å½“å‰å®ç° | å›¾ä¸­éœ€æ±‚ | å»ºè®® |
|--------|---------|---------|------|
| **å·¥ä½œæµ vs BPM** | å·¥ä½œæµå¼•æ“ï¼ˆDAGï¼‰ | BPMNæµç¨‹å¼•æ“ | éœ€è¦æ˜ç¡®ä¸¤è€…çš„å®šä½å’Œå…³ç³» |
| **åº”ç”¨å®šä¹‰** | ä»£ç å®šä¹‰ | å…ƒæ•°æ®å®šä¹‰ | éœ€è¦ç»Ÿä¸€åº”ç”¨å®šä¹‰æ–¹å¼ |
| **æ•°æ®éš”ç¦»** | workspace_idéš”ç¦» | ç§Ÿæˆ·ç‹¬ç«‹æ•°æ®åº“ | éœ€è¦æ”¯æŒå¤šç§éš”ç¦»ç­–ç•¥ |

**è¯¦ç»†è¯´æ˜ï¼š**

#### å†²çª1ï¼šå·¥ä½œæµå¼•æ“ vs BPMNå¼•æ“
**å½“å‰å®ç°**ï¼š
- å·¥ä½œæµå¼•æ“ï¼šåŸºäºDAGçš„èŠ‚ç‚¹ç¼–æ’ï¼Œç”¨äºAIå·¥ä½œæµ
- BPMå¼•æ“ï¼šåŸºç¡€çš„æµç¨‹ç®¡ç†ï¼Œç”¨äºå®¡æ‰¹æµç¨‹

**å›¾ä¸­éœ€æ±‚**ï¼š
- å®Œæ•´çš„BPMN 2.0æµç¨‹å¼•æ“
- æ”¯æŒå¤æ‚çš„ä¸šåŠ¡æµç¨‹ç¼–æ’

**å†²çªå½±å“**ï¼š
- ä¸¤ä¸ªå¼•æ“åŠŸèƒ½æœ‰é‡å 
- èŒè´£è¾¹ç•Œä¸æ¸…æ™°
- å¯èƒ½å¯¼è‡´åŠŸèƒ½å†—ä½™

**å»ºè®®æ–¹æ¡ˆ**ï¼š
1. **æ˜ç¡®å®šä½**ï¼š
   - å·¥ä½œæµå¼•æ“ï¼šä¸“æ³¨äºAIå·¥ä½œæµç¼–æ’ï¼ˆLLMè°ƒç”¨ã€æ•°æ®å¤„ç†ç­‰ï¼‰
   - BPMå¼•æ“ï¼šä¸“æ³¨äºä¸šåŠ¡æµç¨‹ç®¡ç†ï¼ˆå®¡æ‰¹ã€è¡¨å•ã€äººå·¥ä»»åŠ¡ç­‰ï¼‰
2. **é›†æˆæ–¹æ¡ˆ**ï¼š
   - å·¥ä½œæµå¯ä»¥è°ƒç”¨BPMæµç¨‹ï¼ˆä½œä¸ºä¸€ä¸ªèŠ‚ç‚¹ç±»å‹ï¼‰
   - BPMæµç¨‹å¯ä»¥è°ƒç”¨å·¥ä½œæµï¼ˆä½œä¸ºè‡ªåŠ¨åŒ–ä»»åŠ¡ï¼‰
3. **ç»Ÿä¸€æ¥å£**ï¼šæä¾›ç»Ÿä¸€çš„æµç¨‹æ‰§è¡Œæ¥å£

#### å†²çª2ï¼šåº”ç”¨å®šä¹‰æ–¹å¼
**å½“å‰å®ç°**ï¼š
- Applicationè¡¨å­˜å‚¨åº”ç”¨åŸºæœ¬ä¿¡æ¯
- åº”ç”¨é€»è¾‘åœ¨ä»£ç ä¸­å®ç°
- åº”ç”¨é…ç½®å­˜å‚¨åœ¨æ•°æ®åº“

**å›¾ä¸­éœ€æ±‚**ï¼š
- åº”ç”¨å®Œå…¨ç”±å…ƒæ•°æ®å®šä¹‰
- åº”ç”¨å¯ä»¥é€šè¿‡é…ç½®å¿«é€Ÿåˆ›å»º
- åº”ç”¨ç»“æ„å¯ä»¥åŠ¨æ€è°ƒæ•´

**å†²çªå½±å“**ï¼š
- å½“å‰çš„åº”ç”¨æ¨¡å‹æ— æ³•æ”¯æŒå®Œå…¨é…ç½®åŒ–
- åº”ç”¨çš„æ‰©å±•æ€§å—é™
- æ— æ³•å®ç°å¿«é€Ÿçš„åº”ç”¨å¼€å‘

**å»ºè®®æ–¹æ¡ˆ**ï¼š
1. **åº”ç”¨å…ƒæ•°æ®è¡¨**ï¼šæ–°å¢è¡¨æ¥å­˜å‚¨åº”ç”¨çš„å…ƒæ•°æ®å®šä¹‰
   - ApplicationMetadataï¼šåº”ç”¨å…ƒæ•°æ®
   - PageMetadataï¼šé¡µé¢å…ƒæ•°æ®
   - ComponentMetadataï¼šç»„ä»¶å…ƒæ•°æ®
   - DataModelMetadataï¼šæ•°æ®æ¨¡å‹å…ƒæ•°æ®
2. **åº”ç”¨æ¨¡æ¿**ï¼šæä¾›é¢„å®šä¹‰çš„åº”ç”¨æ¨¡æ¿
3. **åº”ç”¨å¸‚åœº**ï¼šæ”¯æŒåº”ç”¨çš„å¯¼å…¥å¯¼å‡ºå’Œå…±äº«

---

### 3. æŠ€æœ¯æ ˆå†²çª

| å†²çªç‚¹ | å½“å‰å®ç° | å›¾ä¸­éœ€æ±‚ | å»ºè®® |
|--------|---------|---------|------|
| **ORMæ–¹å¼** | SQLModelï¼ˆé™æ€ï¼‰ | åŠ¨æ€ORM | éœ€è¦å¼€å‘åŠ¨æ€ORMå±‚ |
| **å‰ç«¯æ¡†æ¶** | Vue 3 + Quasar | å¤šæ¡†æ¶æ”¯æŒ | éœ€è¦æ¡†æ¶æŠ½è±¡å±‚ |
| **æ•°æ®åº“è¿ç§»** | Alembicï¼ˆé™æ€ï¼‰ | åŠ¨æ€DDL | éœ€è¦å¼€å‘DDLç”Ÿæˆå™¨ |

**è¯¦ç»†è¯´æ˜ï¼š**

#### å†²çª1ï¼šé™æ€ORM vs åŠ¨æ€ORM
**å½“å‰å®ç°**ï¼š
- ä½¿ç”¨SQLModelå®šä¹‰é™æ€æ¨¡å‹
- æ¨¡å‹åœ¨ä»£ç ä¸­å®šä¹‰
- é€šè¿‡Alembicç®¡ç†è¿ç§»

**å›¾ä¸­éœ€æ±‚**ï¼š
- æ ¹æ®å…ƒæ•°æ®åŠ¨æ€ç”ŸæˆORMæ¨¡å‹
- æ”¯æŒè¿è¡Œæ—¶åˆ›å»ºè¡¨
- æ”¯æŒåŠ¨æ€å­—æ®µæ·»åŠ 

**å»ºè®®æ–¹æ¡ˆ**ï¼š
1. **åŒå±‚ORM**ï¼š
   - é™æ€ORMï¼šä¿ç•™SQLModelç”¨äºæ ¸å¿ƒæ¨¡å‹
   - åŠ¨æ€ORMï¼šå¼€å‘åŠ¨æ€ORMå±‚ç”¨äºä¸šåŠ¡æ¨¡å‹
2. **å…ƒæ•°æ®é©±åŠ¨**ï¼š
   - ä»å…ƒæ•°æ®ç”ŸæˆSQLAlchemyæ¨¡å‹
   - ä½¿ç”¨åŠ¨æ€ç±»åˆ›å»ºæŠ€æœ¯
3. **è¿ç§»ç­–ç•¥**ï¼š
   - æ ¸å¿ƒæ¨¡å‹ï¼šç»§ç»­ä½¿ç”¨Alembic
   - ä¸šåŠ¡æ¨¡å‹ï¼šä½¿ç”¨åŠ¨æ€DDLç”Ÿæˆå™¨

---

## ğŸš€ å®ç°è·¯çº¿å›¾

åŸºäºå½“å‰å®ç°å’Œå›¾ä¸­éœ€æ±‚ï¼Œæä¾›åˆ†é˜¶æ®µçš„å®ç°è·¯çº¿å›¾ã€‚

---

### é˜¶æ®µä¸€ï¼šå…ƒæ•°æ®åŸºç¡€è®¾æ–½ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰â­

**ç›®æ ‡**ï¼šå»ºç«‹å…ƒæ•°æ®é©±åŠ¨çš„åŸºç¡€è®¾æ–½

#### 1.1 å…ƒæ•°æ®æ¨¡å‹è®¾è®¡ï¼ˆ2-3å‘¨ï¼‰

**æ–°å¢æ•°æ®è¡¨**ï¼š
```sql
-- å…ƒæ•°æ®åŸŸï¼ˆ6å¼ æ–°è¡¨ï¼‰
1. metadata_models          -- æ•°æ®æ¨¡å‹å…ƒæ•°æ®
2. metadata_fields          -- å­—æ®µå…ƒæ•°æ®
3. metadata_pages           -- é¡µé¢å…ƒæ•°æ®
4. metadata_components      -- ç»„ä»¶å…ƒæ•°æ®
5. metadata_apis            -- APIå…ƒæ•°æ®
6. metadata_versions        -- å…ƒæ•°æ®ç‰ˆæœ¬æ§åˆ¶
```

**å®ç°å†…å®¹**ï¼š
- [ ] è®¾è®¡ç»Ÿä¸€çš„å…ƒæ•°æ®æ¨¡å‹Schema
- [ ] åˆ›å»ºå…ƒæ•°æ®å­˜å‚¨è¡¨
- [ ] å®ç°å…ƒæ•°æ®CRUD API
- [ ] å®ç°å…ƒæ•°æ®ç‰ˆæœ¬æ§åˆ¶
- [ ] å®ç°å…ƒæ•°æ®éªŒè¯å™¨

**æ–‡ä»¶ä½ç½®**ï¼š
```
api/app/models/metadata/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ model.py              # æ•°æ®æ¨¡å‹å…ƒæ•°æ®
â”œâ”€â”€ field.py              # å­—æ®µå…ƒæ•°æ®
â”œâ”€â”€ page.py               # é¡µé¢å…ƒæ•°æ®
â”œâ”€â”€ component.py          # ç»„ä»¶å…ƒæ•°æ®
â”œâ”€â”€ api.py                # APIå…ƒæ•°æ®
â””â”€â”€ version.py            # ç‰ˆæœ¬æ§åˆ¶

api/app/services/metadata/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ model_service.py      # æ¨¡å‹å…ƒæ•°æ®æœåŠ¡
â”œâ”€â”€ page_service.py       # é¡µé¢å…ƒæ•°æ®æœåŠ¡
â””â”€â”€ validator.py          # å…ƒæ•°æ®éªŒè¯å™¨
```

#### 1.2 å…ƒæ•°æ®è§£æä¸åŠ è½½å¼•æ“ï¼ˆ2-3å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å¼€å‘å…ƒæ•°æ®è§£æå™¨ï¼ˆJSON Schema â†’ å†…éƒ¨æ¨¡å‹ï¼‰
- [ ] å¼€å‘å…ƒæ•°æ®åŠ è½½å™¨ï¼ˆä»æ•°æ®åº“åŠ è½½å…ƒæ•°æ®ï¼‰
- [ ] å®ç°å…ƒæ•°æ®ç¼“å­˜ç­–ç•¥ï¼ˆRedisï¼‰
- [ ] å®ç°å…ƒæ•°æ®çƒ­åŠ è½½æœºåˆ¶
- [ ] å®ç°å…ƒæ•°æ®å˜æ›´ç›‘å¬

**æ–‡ä»¶ä½ç½®**ï¼š
```
api/app/engine/metadata/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ parser.py             # å…ƒæ•°æ®è§£æå™¨
â”œâ”€â”€ loader.py             # å…ƒæ•°æ®åŠ è½½å™¨
â”œâ”€â”€ cache.py              # å…ƒæ•°æ®ç¼“å­˜
â””â”€â”€ watcher.py            # å…ƒæ•°æ®å˜æ›´ç›‘å¬
```

**APIç«¯ç‚¹**ï¼š
```
POST   /api/v1/metadata/models          # åˆ›å»ºæ•°æ®æ¨¡å‹
GET    /api/v1/metadata/models          # æŸ¥è¯¢æ•°æ®æ¨¡å‹
PUT    /api/v1/metadata/models/{id}     # æ›´æ–°æ•°æ®æ¨¡å‹
DELETE /api/v1/metadata/models/{id}     # åˆ é™¤æ•°æ®æ¨¡å‹
POST   /api/v1/metadata/models/{id}/publish  # å‘å¸ƒæ¨¡å‹
```

---

### é˜¶æ®µäºŒï¼šæ¨¡å‹é©±åŠ¨å¼•æ“ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰â­

**ç›®æ ‡**ï¼šå®ç°æ ¹æ®å…ƒæ•°æ®åŠ¨æ€åˆ›å»ºè¡¨å’Œç”ŸæˆAPI

#### 2.1 DDLåŒæ­¥æœºåˆ¶ï¼ˆ3-4å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å¼€å‘DDLç”Ÿæˆå™¨ï¼ˆå…ƒæ•°æ® â†’ SQL DDLï¼‰
- [ ] å®ç°è¡¨ç»“æ„åŒæ­¥æœºåˆ¶
- [ ] å®ç°å­—æ®µç±»å‹æ˜ å°„è§„åˆ™
- [ ] å®ç°è¡¨ç»“æ„å˜æ›´ç®¡ç†
- [ ] å®ç°å¤šç§Ÿæˆ·è¡¨éš”ç¦»ç­–ç•¥
- [ ] å®ç°æ•°æ®åº“è¿ç§»ç®¡ç†

**æ–‡ä»¶ä½ç½®**ï¼š
```
api/app/engine/ddl/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ generator.py          # DDLç”Ÿæˆå™¨
â”œâ”€â”€ synchronizer.py       # è¡¨ç»“æ„åŒæ­¥å™¨
â”œâ”€â”€ type_mapper.py        # ç±»å‹æ˜ å°„å™¨
â”œâ”€â”€ migration.py          # è¿ç§»ç®¡ç†å™¨
â””â”€â”€ tenant_strategy.py    # ç§Ÿæˆ·éš”ç¦»ç­–ç•¥
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```python
# DDLç”Ÿæˆå™¨ç¤ºä¾‹
class DDLGenerator:
    def generate_create_table(self, model_metadata: ModelMetadata) -> str:
        """æ ¹æ®å…ƒæ•°æ®ç”ŸæˆCREATE TABLEè¯­å¥"""
        pass
    
    def generate_alter_table(self, old_metadata: ModelMetadata, 
                            new_metadata: ModelMetadata) -> List[str]:
        """ç”ŸæˆALTER TABLEè¯­å¥"""
        pass
    
    def generate_index(self, model_metadata: ModelMetadata) -> List[str]:
        """ç”Ÿæˆç´¢å¼•è¯­å¥"""
        pass
```

#### 2.2 åŠ¨æ€ORMä¸æŸ¥è¯¢æ¥å£ï¼ˆ3-4å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å¼€å‘åŠ¨æ€ORMç”Ÿæˆå™¨
- [ ] å®ç°é€šç”¨CRUDæœåŠ¡
- [ ] å®ç°æŸ¥è¯¢æ„å»ºå™¨ï¼ˆQuery Builderï¼‰
- [ ] å®ç°æ•°æ®éªŒè¯å™¨
- [ ] å®ç°å…³è”æŸ¥è¯¢æ”¯æŒ
- [ ] å®ç°åŠ¨æ€APIç”Ÿæˆå™¨

**æ–‡ä»¶ä½ç½®**ï¼š
```
api/app/engine/orm/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ dynamic_model.py      # åŠ¨æ€æ¨¡å‹ç”Ÿæˆå™¨
â”œâ”€â”€ crud_service.py       # é€šç”¨CRUDæœåŠ¡
â”œâ”€â”€ query_builder.py      # æŸ¥è¯¢æ„å»ºå™¨
â”œâ”€â”€ validator.py          # æ•°æ®éªŒè¯å™¨
â””â”€â”€ relation.py           # å…³è”æŸ¥è¯¢

api/app/engine/api/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ generator.py          # APIç”Ÿæˆå™¨
â”œâ”€â”€ router_factory.py     # è·¯ç”±å·¥å‚
â””â”€â”€ schema_factory.py     # Schemaå·¥å‚
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```python
# åŠ¨æ€æ¨¡å‹ç”Ÿæˆå™¨ç¤ºä¾‹
class DynamicModelGenerator:
    def generate_model(self, model_metadata: ModelMetadata) -> Type[SQLModel]:
        """æ ¹æ®å…ƒæ•°æ®ç”ŸæˆSQLModelç±»"""
        pass
    
    def generate_schema(self, model_metadata: ModelMetadata) -> Type[BaseModel]:
        """ç”ŸæˆPydantic Schema"""
        pass

# é€šç”¨CRUDæœåŠ¡ç¤ºä¾‹
class GenericCRUDService:
    def create(self, model_name: str, data: dict) -> dict:
        """é€šç”¨åˆ›å»º"""
        pass
    
    def query(self, model_name: str, filters: dict, 
              pagination: dict) -> List[dict]:
        """é€šç”¨æŸ¥è¯¢"""
        pass
```

**APIç«¯ç‚¹**ï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰ï¼š
```
POST   /api/v1/data/{model_name}              # åˆ›å»ºè®°å½•
GET    /api/v1/data/{model_name}              # æŸ¥è¯¢è®°å½•
GET    /api/v1/data/{model_name}/{id}         # è·å–å•æ¡è®°å½•
PUT    /api/v1/data/{model_name}/{id}         # æ›´æ–°è®°å½•
DELETE /api/v1/data/{model_name}/{id}         # åˆ é™¤è®°å½•
POST   /api/v1/data/{model_name}/batch        # æ‰¹é‡æ“ä½œ
```

---

### é˜¶æ®µä¸‰ï¼šæ¸²æŸ“å¼•æ“ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰â­

**ç›®æ ‡**ï¼šå®ç°å‰ç«¯çš„åŠ¨æ€æ¸²æŸ“

#### 3.1 å‰ç«¯è¿è¡Œæ—¶æ¸²æŸ“å¼•æ“ï¼ˆ4-5å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] è®¾è®¡JSON Schemaåˆ°ç»„ä»¶çš„æ˜ å°„è§„åˆ™
- [ ] å¼€å‘åŠ¨æ€ç»„ä»¶æ¸²æŸ“å™¨
- [ ] å®ç°ç»„ä»¶æ³¨å†Œä¸­å¿ƒ
- [ ] å®ç°è¿è¡Œæ—¶è¡¨è¾¾å¼è§£æå™¨
- [ ] å®ç°äº‹ä»¶ç»‘å®šæœºåˆ¶
- [ ] å®ç°æ•°æ®ç»‘å®šæœºåˆ¶

**æ–‡ä»¶ä½ç½®**ï¼š
```
web/src/engine/
â”œâ”€â”€ renderer/
â”‚   â”œâ”€â”€ index.ts          # æ¸²æŸ“å™¨å…¥å£
â”‚   â”œâ”€â”€ component-renderer.ts  # ç»„ä»¶æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ expression-parser.ts   # è¡¨è¾¾å¼è§£æå™¨
â”‚   â””â”€â”€ event-binder.ts        # äº‹ä»¶ç»‘å®šå™¨
â”œâ”€â”€ registry/
â”‚   â”œâ”€â”€ component-registry.ts  # ç»„ä»¶æ³¨å†Œä¸­å¿ƒ
â”‚   â””â”€â”€ widget-registry.ts     # æ§ä»¶æ³¨å†Œä¸­å¿ƒ
â””â”€â”€ schema/
    â”œâ”€â”€ page-schema.ts    # é¡µé¢Schemaå®šä¹‰
    â””â”€â”€ component-schema.ts  # ç»„ä»¶Schemaå®šä¹‰
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```typescript
// åŠ¨æ€æ¸²æŸ“å™¨ç¤ºä¾‹
interface PageSchema {
  id: string;
  name: string;
  components: ComponentSchema[];
  layout: LayoutConfig;
}

interface ComponentSchema {
  id: string;
  type: string;  // 'input', 'button', 'table', etc.
  props: Record<string, any>;
  events: Record<string, string>;  // äº‹ä»¶è¡¨è¾¾å¼
  children?: ComponentSchema[];
}

class DynamicRenderer {
  render(schema: PageSchema): VNode {
    // æ ¹æ®Schemaæ¸²æŸ“Vueç»„ä»¶
  }
}
```

#### 3.2 å¤šç«¯æ¸²æŸ“é€‚é…ï¼ˆ3-4å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å¼€å‘å¤šç«¯æ¸²æŸ“é€‚é…å™¨
- [ ] å®ç°å¹³å°å·®å¼‚æŠ½è±¡å±‚
- [ ] å®ç°å“åº”å¼å¸ƒå±€å¼•æ“
- [ ] å®ç°ä¸»é¢˜å’Œæ ·å¼ç³»ç»Ÿ
- [ ] æ”¯æŒH5é€‚é…
- [ ] æ”¯æŒå°ç¨‹åºé€‚é…ï¼ˆå¯é€‰ï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š
```
web/src/adapters/
â”œâ”€â”€ web-adapter.ts        # Webç«¯é€‚é…å™¨
â”œâ”€â”€ h5-adapter.ts         # H5é€‚é…å™¨
â”œâ”€â”€ miniapp-adapter.ts    # å°ç¨‹åºé€‚é…å™¨
â””â”€â”€ platform-detector.ts  # å¹³å°æ£€æµ‹å™¨

web/src/layout/
â”œâ”€â”€ responsive-engine.ts  # å“åº”å¼å¼•æ“
â””â”€â”€ grid-system.ts        # æ …æ ¼ç³»ç»Ÿ
```

---

### é˜¶æ®µå››ï¼šBPMNå¼•æ“å¢å¼ºï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰â­

**ç›®æ ‡**ï¼šå¢å¼ºBPMå¼•æ“ï¼Œæ”¯æŒå®Œæ•´çš„BPMN 2.0è§„èŒƒ

#### 4.1 BPMN 2.0è§„èŒƒæ”¯æŒï¼ˆ4-5å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å®ç°BPMN 2.0æ ¸å¿ƒå…ƒç´ 
  - [ ] å¼€å§‹äº‹ä»¶ã€ç»“æŸäº‹ä»¶ã€ä¸­é—´äº‹ä»¶
  - [ ] ç”¨æˆ·ä»»åŠ¡ã€æœåŠ¡ä»»åŠ¡ã€è„šæœ¬ä»»åŠ¡
  - [ ] æ’ä»–ç½‘å…³ã€å¹¶è¡Œç½‘å…³ã€åŒ…å®¹ç½‘å…³
  - [ ] å­æµç¨‹ã€è°ƒç”¨æ´»åŠ¨
- [ ] å®ç°BPMN XMLè§£æå™¨
- [ ] å®ç°æµç¨‹éªŒè¯å™¨
- [ ] å®ç°æµç¨‹æ‰§è¡Œå¼•æ“å¢å¼º

**æ–‡ä»¶ä½ç½®**ï¼š
```
api/app/engine/bpmn/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ parser.py             # BPMN XMLè§£æå™¨
â”œâ”€â”€ validator.py          # æµç¨‹éªŒè¯å™¨
â”œâ”€â”€ elements/             # BPMNå…ƒç´ å®ç°
â”‚   â”œâ”€â”€ events.py        # äº‹ä»¶
â”‚   â”œâ”€â”€ tasks.py         # ä»»åŠ¡
â”‚   â”œâ”€â”€ gateways.py      # ç½‘å…³
â”‚   â””â”€â”€ subprocess.py    # å­æµç¨‹
â””â”€â”€ executor.py           # å¢å¼ºçš„æ‰§è¡Œå™¨
```

#### 4.2 å¯è§†åŒ–æµç¨‹è®¾è®¡å™¨ï¼ˆ5-6å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] é›†æˆBPMN.jsæˆ–å¼€å‘è‡ªå®šä¹‰è®¾è®¡å™¨
- [ ] å®ç°æ‹–æ‹½å¼æµç¨‹è®¾è®¡
- [ ] å®ç°æµç¨‹å…ƒç´ é…ç½®é¢æ¿
- [ ] å®ç°æµç¨‹éªŒè¯å’Œé¢„è§ˆ
- [ ] å®ç°æµç¨‹å¯¼å…¥å¯¼å‡º

**æ–‡ä»¶ä½ç½®**ï¼š
```
web/src/components/bpmn/
â”œâ”€â”€ designer/
â”‚   â”œâ”€â”€ BpmnDesigner.vue  # æµç¨‹è®¾è®¡å™¨
â”‚   â”œâ”€â”€ Palette.vue       # å…ƒç´ é¢æ¿
â”‚   â”œâ”€â”€ Canvas.vue        # ç”»å¸ƒ
â”‚   â””â”€â”€ Properties.vue    # å±æ€§é¢æ¿
â””â”€â”€ viewer/
    â””â”€â”€ BpmnViewer.vue    # æµç¨‹æŸ¥çœ‹å™¨
```

#### 4.3 åˆ†å¸ƒå¼äº‹åŠ¡æ”¯æŒï¼ˆ3-4å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å®ç°Sagaæ¨¡å¼
- [ ] å®ç°è¡¥å¿æœºåˆ¶
- [ ] å®ç°é•¿äº‹åŠ¡ç®¡ç†
- [ ] å®ç°äº‹åŠ¡æ—¥å¿—
- [ ] å®ç°äº‹åŠ¡ç›‘æ§

**æ–‡ä»¶ä½ç½®**ï¼š
```
api/app/engine/transaction/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ saga.py               # Sagaåè°ƒå™¨
â”œâ”€â”€ compensator.py        # è¡¥å¿å™¨
â”œâ”€â”€ transaction_log.py    # äº‹åŠ¡æ—¥å¿—
â””â”€â”€ monitor.py            # äº‹åŠ¡ç›‘æ§
```

---

### é˜¶æ®µäº”ï¼šé›†æˆä¸ä¼˜åŒ–ï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰

**ç›®æ ‡**ï¼šç³»ç»Ÿé›†æˆå’Œæ€§èƒ½ä¼˜åŒ–

#### 5.1 ç³»ç»Ÿé›†æˆï¼ˆ2-3å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å·¥ä½œæµå¼•æ“ä¸BPMå¼•æ“é›†æˆ
- [ ] å…ƒæ•°æ®å¼•æ“ä¸æ¸²æŸ“å¼•æ“é›†æˆ
- [ ] ç»Ÿä¸€çš„åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- [ ] ç»Ÿä¸€çš„æƒé™æ§åˆ¶
- [ ] ç»Ÿä¸€çš„æ—¥å¿—å’Œç›‘æ§

#### 5.2 æ€§èƒ½ä¼˜åŒ–ï¼ˆ2-3å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å…ƒæ•°æ®ç¼“å­˜ä¼˜åŒ–
- [ ] åŠ¨æ€SQLæŸ¥è¯¢ä¼˜åŒ–
- [ ] å‰ç«¯æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–
- [ ] æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- [ ] åˆ†å¸ƒå¼ç¼“å­˜ç­–ç•¥

#### 5.3 å¼€å‘è€…å·¥å…·ï¼ˆ3-4å‘¨ï¼‰

**å®ç°å†…å®¹**ï¼š
- [ ] å…ƒæ•°æ®è®¾è®¡å™¨
- [ ] æ•°æ®æ¨¡å‹è®¾è®¡å™¨
- [ ] é¡µé¢è®¾è®¡å™¨
- [ ] APIæµ‹è¯•å·¥å…·
- [ ] è°ƒè¯•å·¥å…·

---

## ğŸ“Š å®ç°ä¼˜å…ˆçº§çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | ä¾èµ–å…³ç³» | å»ºè®®å¼€å§‹æ—¶é—´ |
|---------|--------|--------|---------|-------------|
| **å…ƒæ•°æ®åŸºç¡€è®¾æ–½** | â­â­â­â­â­ | 4-6å‘¨ | æ—  | ç«‹å³å¼€å§‹ |
| **æ¨¡å‹é©±åŠ¨å¼•æ“** | â­â­â­â­â­ | 6-8å‘¨ | å…ƒæ•°æ®åŸºç¡€è®¾æ–½ | ç¬¬5å‘¨ |
| **æ¸²æŸ“å¼•æ“** | â­â­â­â­ | 7-9å‘¨ | å…ƒæ•°æ®åŸºç¡€è®¾æ–½ | ç¬¬5å‘¨ |
| **BPMNå¼•æ“å¢å¼º** | â­â­â­ | 12-15å‘¨ | æ— ï¼ˆå¯å¹¶è¡Œï¼‰ | ç¬¬9å‘¨ |
| **ç³»ç»Ÿé›†æˆ** | â­â­â­ | 2-3å‘¨ | æ‰€æœ‰æ ¸å¿ƒæ¨¡å— | ç¬¬20å‘¨ |
| **æ€§èƒ½ä¼˜åŒ–** | â­â­ | 2-3å‘¨ | ç³»ç»Ÿé›†æˆ | ç¬¬22å‘¨ |
| **å¼€å‘è€…å·¥å…·** | â­â­ | 3-4å‘¨ | æ ¸å¿ƒåŠŸèƒ½å®Œæˆ | ç¬¬24å‘¨ |

**æ€»å·¥ä½œé‡ä¼°ç®—**ï¼šçº¦ 36-48å‘¨ï¼ˆ9-12ä¸ªæœˆï¼‰

---

## ğŸ—ï¸ æ¶æ„è°ƒæ•´å»ºè®®

### 1. åˆ†å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰              â”‚
â”‚  - ä½ä»£ç åº”ç”¨è®¾è®¡å™¨                                         â”‚
â”‚  - é¡µé¢è®¾è®¡å™¨                                              â”‚
â”‚  - æµç¨‹è®¾è®¡å™¨                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¼•æ“å±‚ï¼ˆEngine Layerï¼‰                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å…ƒæ•°æ®å¼•æ“    â”‚  â”‚ æ¨¡å‹é©±åŠ¨å¼•æ“  â”‚  â”‚ æ¸²æŸ“å¼•æ“      â”‚  â”‚
â”‚  â”‚ - è§£æå™¨     â”‚  â”‚ - DDLç”Ÿæˆå™¨  â”‚  â”‚ - ç»„ä»¶æ¸²æŸ“å™¨  â”‚  â”‚
â”‚  â”‚ - åŠ è½½å™¨     â”‚  â”‚ - åŠ¨æ€ORM    â”‚  â”‚ - è¡¨è¾¾å¼è§£æ  â”‚  â”‚
â”‚  â”‚ - ç¼“å­˜ç®¡ç†   â”‚  â”‚ - APIç”Ÿæˆå™¨  â”‚  â”‚ - äº‹ä»¶ç»‘å®š    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ å·¥ä½œæµå¼•æ“    â”‚  â”‚ BPMNå¼•æ“     â”‚                     â”‚
â”‚  â”‚ - DAGæ‰§è¡Œ    â”‚  â”‚ - æµç¨‹æ‰§è¡Œ   â”‚                     â”‚
â”‚  â”‚ - èŠ‚ç‚¹ç¼–æ’   â”‚  â”‚ - ä»»åŠ¡åˆ†å‘   â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æœåŠ¡å±‚ï¼ˆService Layerï¼‰                    â”‚
â”‚  - ä¸šåŠ¡é€»è¾‘æœåŠ¡                                            â”‚
â”‚  - æƒé™æ§åˆ¶æœåŠ¡                                            â”‚
â”‚  - ç§Ÿæˆ·ç®¡ç†æœåŠ¡                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®å±‚ï¼ˆData Layerï¼‰                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å…ƒæ•°æ®å­˜å‚¨    â”‚  â”‚ ä¸šåŠ¡æ•°æ®å­˜å‚¨  â”‚  â”‚ æ–‡ä»¶å­˜å‚¨      â”‚  â”‚
â”‚  â”‚ - PostgreSQL â”‚  â”‚ - PostgreSQL â”‚  â”‚ - MongoDB    â”‚  â”‚
â”‚  â”‚ - 37å¼ ç³»ç»Ÿè¡¨ â”‚  â”‚ - åŠ¨æ€ä¸šåŠ¡è¡¨ â”‚  â”‚ - GridFS     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ ç¼“å­˜å±‚        â”‚                                        â”‚
â”‚  â”‚ - Redis      â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ•°æ®åº“è®¾è®¡è°ƒæ•´

#### 2.1 æ–°å¢å…ƒæ•°æ®è¡¨ï¼ˆ6å¼ ï¼‰

```sql
-- å…ƒæ•°æ®åŸŸ
CREATE TABLE metadata_models (
    id UUID PRIMARY KEY,
    workspace_id UUID NOT NULL,
    name VARCHAR(255) NOT NULL,
    display_name VARCHAR(255),
    description TEXT,
    table_name VARCHAR(255),  -- å¯¹åº”çš„æ•°æ®åº“è¡¨å
    schema_definition JSONB,  -- JSON Schemaå®šä¹‰
    version INTEGER DEFAULT 1,
    status VARCHAR(50),       -- draft, published, archived
    created_by UUID,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

CREATE TABLE metadata_fields (
    id UUID PRIMARY KEY,
    model_id UUID REFERENCES metadata_models(id),
    name VARCHAR(255) NOT NULL,
    display_name VARCHAR(255),
    field_type VARCHAR(50),   -- string, integer, boolean, etc.
    db_type VARCHAR(50),      -- varchar, int, boolean, etc.
    is_required BOOLEAN DEFAULT FALSE,
    is_unique BOOLEAN DEFAULT FALSE,
    default_value TEXT,
    validation_rules JSONB,
    ui_config JSONB,          -- å‰ç«¯æ¸²æŸ“é…ç½®
    position INTEGER,
    created_at TIMESTAMP
);

CREATE TABLE metadata_pages (
    id UUID PRIMARY KEY,
    workspace_id UUID NOT NULL,
    name VARCHAR(255) NOT NULL,
    display_name VARCHAR(255),
    route_path VARCHAR(500),
    layout_config JSONB,      -- å¸ƒå±€é…ç½®
    components JSONB,         -- ç»„ä»¶é…ç½®
    permissions JSONB,        -- æƒé™é…ç½®
    version INTEGER DEFAULT 1,
    status VARCHAR(50),
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

CREATE TABLE metadata_components (
    id UUID PRIMARY KEY,
    page_id UUID REFERENCES metadata_pages(id),
    component_type VARCHAR(100),
    component_config JSONB,
    data_binding JSONB,       -- æ•°æ®ç»‘å®šé…ç½®
    event_binding JSONB,      -- äº‹ä»¶ç»‘å®šé…ç½®
    position INTEGER,
    created_at TIMESTAMP
);

CREATE TABLE metadata_apis (
    id UUID PRIMARY KEY,
    workspace_id UUID NOT NULL,
    model_id UUID REFERENCES metadata_models(id),
    method VARCHAR(10),       -- GET, POST, PUT, DELETE
    path VARCHAR(500),
    handler_type VARCHAR(50), -- auto, custom
    handler_config JSONB,
    permissions JSONB,
    created_at TIMESTAMP
);

CREATE TABLE metadata_versions (
    id UUID PRIMARY KEY,
    entity_type VARCHAR(50),  -- model, page, api
    entity_id UUID,
    version INTEGER,
    content JSONB,
    change_log TEXT,
    created_by UUID,
    created_at TIMESTAMP
);
```

#### 2.2 åŠ¨æ€ä¸šåŠ¡è¡¨å‘½åè§„èŒƒ

```
ç§Ÿæˆ·ä¸šåŠ¡è¡¨å‘½åè§„èŒƒï¼š
- å‰ç¼€ï¼štenant_{workspace_id}_
- è¡¨åï¼š{model_name}
- å®Œæ•´ç¤ºä¾‹ï¼štenant_123e4567_customers

ç´¢å¼•å‘½åè§„èŒƒï¼š
- idx_{table_name}_{field_name}
```

### 3. APIè®¾è®¡è°ƒæ•´

#### 3.1 æ–°å¢å…ƒæ•°æ®ç®¡ç†API

```
# å…ƒæ•°æ®æ¨¡å‹ç®¡ç†
POST   /api/v1/metadata/models              # åˆ›å»ºæ•°æ®æ¨¡å‹
GET    /api/v1/metadata/models              # æŸ¥è¯¢æ•°æ®æ¨¡å‹åˆ—è¡¨
GET    /api/v1/metadata/models/{id}         # è·å–æ•°æ®æ¨¡å‹è¯¦æƒ…
PUT    /api/v1/metadata/models/{id}         # æ›´æ–°æ•°æ®æ¨¡å‹
DELETE /api/v1/metadata/models/{id}         # åˆ é™¤æ•°æ®æ¨¡å‹
POST   /api/v1/metadata/models/{id}/publish # å‘å¸ƒæ•°æ®æ¨¡å‹
POST   /api/v1/metadata/models/{id}/sync    # åŒæ­¥åˆ°æ•°æ®åº“

# å…ƒæ•°æ®é¡µé¢ç®¡ç†
POST   /api/v1/metadata/pages               # åˆ›å»ºé¡µé¢
GET    /api/v1/metadata/pages               # æŸ¥è¯¢é¡µé¢åˆ—è¡¨
GET    /api/v1/metadata/pages/{id}          # è·å–é¡µé¢è¯¦æƒ…
PUT    /api/v1/metadata/pages/{id}          # æ›´æ–°é¡µé¢
DELETE /api/v1/metadata/pages/{id}          # åˆ é™¤é¡µé¢
POST   /api/v1/metadata/pages/{id}/publish  # å‘å¸ƒé¡µé¢

# åŠ¨æ€æ•°æ®APIï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
POST   /api/v1/data/{model_name}            # åˆ›å»ºè®°å½•
GET    /api/v1/data/{model_name}            # æŸ¥è¯¢è®°å½•
GET    /api/v1/data/{model_name}/{id}       # è·å–è®°å½•
PUT    /api/v1/data/{model_name}/{id}       # æ›´æ–°è®°å½•
DELETE /api/v1/data/{model_name}/{id}       # åˆ é™¤è®°å½•
POST   /api/v1/data/{model_name}/batch      # æ‰¹é‡æ“ä½œ
POST   /api/v1/data/{model_name}/query      # é«˜çº§æŸ¥è¯¢
```

---

## ğŸ“ å®ç°ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåˆ›å»ºåŠ¨æ€æ•°æ®æ¨¡å‹

```python
# 1. å®šä¹‰å…ƒæ•°æ®
model_metadata = {
    "name": "customer",
    "display_name": "å®¢æˆ·",
    "description": "å®¢æˆ·ä¿¡æ¯ç®¡ç†",
    "fields": [
        {
            "name": "name",
            "display_name": "å®¢æˆ·åç§°",
            "field_type": "string",
            "db_type": "varchar(255)",
            "is_required": True,
            "validation_rules": {
                "min_length": 2,
                "max_length": 100
            }
        },
        {
            "name": "email",
            "display_name": "é‚®ç®±",
            "field_type": "email",
            "db_type": "varchar(255)",
            "is_unique": True,
            "validation_rules": {
                "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
            }
        },
        {
            "name": "phone",
            "display_name": "ç”µè¯",
            "field_type": "string",
            "db_type": "varchar(50)"
        },
        {
            "name": "status",
            "display_name": "çŠ¶æ€",
            "field_type": "enum",
            "db_type": "varchar(20)",
            "default_value": "active",
            "validation_rules": {
                "enum": ["active", "inactive", "pending"]
            }
        }
    ]
}

# 2. åˆ›å»ºå…ƒæ•°æ®
response = requests.post(
    "/api/v1/metadata/models",
    json=model_metadata,
    headers={"X-Workspace-ID": workspace_id}
)

# 3. å‘å¸ƒæ¨¡å‹ï¼ˆè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨ï¼‰
model_id = response.json()["id"]
requests.post(f"/api/v1/metadata/models/{model_id}/publish")

# 4. ä½¿ç”¨åŠ¨æ€APIåˆ›å»ºæ•°æ®
customer_data = {
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "phone": "13800138000",
    "status": "active"
}
requests.post(
    "/api/v1/data/customer",
    json=customer_data,
    headers={"X-Workspace-ID": workspace_id}
)
```

### ç¤ºä¾‹2ï¼šåˆ›å»ºåŠ¨æ€é¡µé¢

```javascript
// 1. å®šä¹‰é¡µé¢å…ƒæ•°æ®
const pageMetadata = {
  name: "customer_list",
  display_name: "å®¢æˆ·åˆ—è¡¨",
  route_path: "/customers",
  layout_config: {
    type: "default",
    header: true,
    sidebar: true
  },
  components: [
    {
      id: "search_form",
      type: "form",
      props: {
        layout: "inline"
      },
      fields: [
        {
          name: "keyword",
          type: "input",
          label: "å…³é”®è¯",
          placeholder: "è¯·è¾“å…¥å®¢æˆ·åç§°æˆ–é‚®ç®±"
        },
        {
          name: "status",
          type: "select",
          label: "çŠ¶æ€",
          options: [
            { label: "å…¨éƒ¨", value: "" },
            { label: "æ´»è·ƒ", value: "active" },
            { label: "åœç”¨", value: "inactive" }
          ]
        }
      ],
      events: {
        onSubmit: "handleSearch"
      }
    },
    {
      id: "customer_table",
      type: "table",
      props: {
        dataSource: "{{customers}}",
        pagination: true,
        rowKey: "id"
      },
      columns: [
        { title: "å®¢æˆ·åç§°", dataIndex: "name", key: "name" },
        { title: "é‚®ç®±", dataIndex: "email", key: "email" },
        { title: "ç”µè¯", dataIndex: "phone", key: "phone" },
        { title: "çŠ¶æ€", dataIndex: "status", key: "status" },
        {
          title: "æ“ä½œ",
          key: "action",
          render: "{{renderActions}}"
        }
      ]
    }
  ],
  data_binding: {
    customers: {
      source: "api",
      api: "/api/v1/data/customer",
      method: "GET",
      params: "{{searchParams}}"
    }
  },
  methods: {
    handleSearch: `
      function(values) {
        this.searchParams = values;
        this.loadCustomers();
      }
    `,
    loadCustomers: `
      async function() {
        const response = await this.$api.get('/api/v1/data/customer', {
          params: this.searchParams
        });
        this.customers = response.data;
      }
    `
  }
};

// 2. åˆ›å»ºé¡µé¢
const response = await axios.post(
  '/api/v1/metadata/pages',
  pageMetadata,
  { headers: { 'X-Workspace-ID': workspaceId } }
);

// 3. å‘å¸ƒé¡µé¢
const pageId = response.data.id;
await axios.post(`/api/v1/metadata/pages/${pageId}/publish`);

// 4. å‰ç«¯åŠ¨æ€æ¸²æŸ“
import { DynamicRenderer } from '@/engine/renderer';

const renderer = new DynamicRenderer();
const pageComponent = renderer.render(pageMetadata);
```

---

## ğŸ¯ å…³é”®æŠ€æœ¯å†³ç­–

### å†³ç­–1ï¼šå…ƒæ•°æ®å­˜å‚¨æ–¹å¼

**é€‰é¡¹Aï¼šå…³ç³»å‹æ•°æ®åº“ï¼ˆæ¨èï¼‰âœ…**
- ä¼˜ç‚¹ï¼š
  - ç»“æ„åŒ–å­˜å‚¨ï¼ŒæŸ¥è¯¢æ€§èƒ½å¥½
  - æ”¯æŒäº‹åŠ¡å’Œçº¦æŸ
  - ä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œå®¡è®¡
- ç¼ºç‚¹ï¼š
  - Schemaç›¸å¯¹å›ºå®š
  - æ‰©å±•æ€§ç•¥å·®
- é€‚ç”¨åœºæ™¯ï¼šå…ƒæ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®š

**é€‰é¡¹Bï¼šæ–‡æ¡£æ•°æ®åº“ï¼ˆMongoDBï¼‰**
- ä¼˜ç‚¹ï¼š
  - Schemaçµæ´»
  - æ‰©å±•æ€§å¥½
  - é€‚åˆåµŒå¥—ç»“æ„
- ç¼ºç‚¹ï¼š
  - æŸ¥è¯¢æ€§èƒ½ç›¸å¯¹è¾ƒå·®
  - ç¼ºå°‘å¼ºçº¦æŸ
- é€‚ç”¨åœºæ™¯ï¼šå…ƒæ•°æ®ç»“æ„é¢‘ç¹å˜åŒ–

**å»ºè®®**ï¼šä½¿ç”¨PostgreSQLçš„JSONBå­—æ®µï¼Œå…¼é¡¾ä¸¤è€…ä¼˜åŠ¿

---

### å†³ç­–2ï¼šåŠ¨æ€è¡¨åˆ›å»ºç­–ç•¥

**é€‰é¡¹Aï¼šå…±äº«è¡¨ + ç§Ÿæˆ·å­—æ®µï¼ˆå½“å‰å®ç°ï¼‰**
```sql
-- æ‰€æœ‰ç§Ÿæˆ·å…±äº«ä¸€å¼ è¡¨
CREATE TABLE tenant_123_customers (
    id UUID PRIMARY KEY,
    workspace_id UUID NOT NULL,  -- ç§Ÿæˆ·éš”ç¦»
    name VARCHAR(255),
    ...
);
```
- ä¼˜ç‚¹ï¼šç®¡ç†ç®€å•ï¼Œè¡¨æ•°é‡å°‘
- ç¼ºç‚¹ï¼šæ€§èƒ½å¯èƒ½å—å½±å“ï¼Œå®‰å…¨æ€§è¾ƒä½

**é€‰é¡¹Bï¼šç§Ÿæˆ·ç‹¬ç«‹è¡¨ï¼ˆæ¨èï¼‰âœ…**
```sql
-- æ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹çš„è¡¨
CREATE TABLE tenant_workspace1_customers (...);
CREATE TABLE tenant_workspace2_customers (...);
```
- ä¼˜ç‚¹ï¼šæ€§èƒ½å¥½ï¼Œå®‰å…¨æ€§é«˜ï¼Œä¾¿äºå¤‡ä»½
- ç¼ºç‚¹ï¼šè¡¨æ•°é‡å¤šï¼Œç®¡ç†å¤æ‚

**é€‰é¡¹Cï¼šç§Ÿæˆ·ç‹¬ç«‹æ•°æ®åº“**
```sql
-- æ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹çš„æ•°æ®åº“
CREATE DATABASE tenant_workspace1;
CREATE DATABASE tenant_workspace2;
```
- ä¼˜ç‚¹ï¼šå®Œå…¨éš”ç¦»ï¼Œæ€§èƒ½æœ€å¥½
- ç¼ºç‚¹ï¼šèµ„æºæ¶ˆè€—å¤§ï¼Œç®¡ç†æœ€å¤æ‚

**å»ºè®®**ï¼š
- å°ç§Ÿæˆ·ï¼šé€‰é¡¹Aï¼ˆå…±äº«è¡¨ï¼‰
- ä¸­ç­‰ç§Ÿæˆ·ï¼šé€‰é¡¹Bï¼ˆç‹¬ç«‹è¡¨ï¼‰
- å¤§ç§Ÿæˆ·ï¼šé€‰é¡¹Cï¼ˆç‹¬ç«‹æ•°æ®åº“ï¼‰
- æ”¯æŒç§Ÿæˆ·è‡ªä¸»é€‰æ‹©éš”ç¦»ç­–ç•¥

---

### å†³ç­–3ï¼šå‰ç«¯æ¸²æŸ“æ–¹å¼

**é€‰é¡¹Aï¼šå®Œå…¨åŠ¨æ€æ¸²æŸ“ï¼ˆæ¨èï¼‰âœ…**
```typescript
// è¿è¡Œæ—¶æ ¹æ®JSONæ¸²æŸ“
const component = renderer.render(schema);
```
- ä¼˜ç‚¹ï¼šå®Œå…¨é…ç½®åŒ–ï¼Œçµæ´»æ€§æœ€é«˜
- ç¼ºç‚¹ï¼šæ€§èƒ½ç•¥å·®ï¼Œè°ƒè¯•å›°éš¾

**é€‰é¡¹Bï¼šæ¨¡æ¿ + é…ç½®**
```vue
<!-- é¢„å®šä¹‰æ¨¡æ¿ -->
<template>
  <dynamic-form :config="formConfig" />
</template>
```
- ä¼˜ç‚¹ï¼šæ€§èƒ½å¥½ï¼Œæ˜“äºè°ƒè¯•
- ç¼ºç‚¹ï¼šçµæ´»æ€§å—é™

**é€‰é¡¹Cï¼šæ··åˆæ¨¡å¼**
```typescript
// å¸¸ç”¨ç»„ä»¶ä½¿ç”¨æ¨¡æ¿ï¼Œå¤æ‚ç»„ä»¶åŠ¨æ€æ¸²æŸ“
if (isCommonComponent) {
  return renderTemplate(schema);
} else {
  return renderDynamic(schema);
}
```
- ä¼˜ç‚¹ï¼šå…¼é¡¾æ€§èƒ½å’Œçµæ´»æ€§
- ç¼ºç‚¹ï¼šå®ç°å¤æ‚

**å»ºè®®**ï¼šé‡‡ç”¨é€‰é¡¹Cï¼ˆæ··åˆæ¨¡å¼ï¼‰

---

### å†³ç­–4ï¼šBPMNå¼•æ“é€‰æ‹©

**é€‰é¡¹Aï¼šé›†æˆCamundaï¼ˆæ¨èï¼‰âœ…**
- ä¼˜ç‚¹ï¼š
  - åŠŸèƒ½å®Œæ•´ï¼Œç¬¦åˆBPMN 2.0è§„èŒƒ
  - ç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£å®Œå–„
  - æä¾›å¯è§†åŒ–è®¾è®¡å™¨
- ç¼ºç‚¹ï¼š
  - JavaæŠ€æœ¯æ ˆï¼Œéœ€è¦é¢å¤–éƒ¨ç½²
  - å­¦ä¹ æ›²çº¿é™¡å³­
- é›†æˆæ–¹å¼ï¼šé€šè¿‡REST APIè°ƒç”¨

**é€‰é¡¹Bï¼šé›†æˆFlowable**
- ä¼˜ç‚¹ï¼šç±»ä¼¼Camundaï¼Œæ›´è½»é‡
- ç¼ºç‚¹ï¼šç¤¾åŒºç›¸å¯¹è¾ƒå°

**é€‰é¡¹Cï¼šè‡ªç ”å¼•æ“ï¼ˆå½“å‰å®ç°ï¼‰**
- ä¼˜ç‚¹ï¼šå®Œå…¨å¯æ§ï¼Œè½»é‡çº§
- ç¼ºç‚¹ï¼šåŠŸèƒ½ä¸å®Œæ•´ï¼Œéœ€è¦å¤§é‡å¼€å‘

**å»ºè®®**ï¼š
- çŸ­æœŸï¼šç»§ç»­ä½¿ç”¨è‡ªç ”å¼•æ“ï¼Œæ»¡è¶³åŸºæœ¬éœ€æ±‚
- é•¿æœŸï¼šé›†æˆCamundaï¼Œæ”¯æŒå¤æ‚æµç¨‹

---

### å†³ç­–5ï¼šAPIç”Ÿæˆæ–¹å¼

**é€‰é¡¹Aï¼šå®Œå…¨è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¨èï¼‰âœ…**
```python
# æ ¹æ®å…ƒæ•°æ®è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰CRUD API
@app.post("/api/v1/data/{model_name}")
async def create_record(model_name: str, data: dict):
    model = get_dynamic_model(model_name)
    return crud_service.create(model, data)
```
- ä¼˜ç‚¹ï¼šå¼€å‘æ•ˆç‡é«˜ï¼Œä¸€è‡´æ€§å¥½
- ç¼ºç‚¹ï¼šçµæ´»æ€§å—é™

**é€‰é¡¹Bï¼šåŠè‡ªåŠ¨ç”Ÿæˆ**
```python
# ç”ŸæˆåŸºç¡€CRUDï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•
class CustomerAPI(GenericAPI):
    model = "customer"
    
    def custom_method(self):
        # è‡ªå®šä¹‰é€»è¾‘
        pass
```
- ä¼˜ç‚¹ï¼šå…¼é¡¾æ•ˆç‡å’Œçµæ´»æ€§
- ç¼ºç‚¹ï¼šå®ç°å¤æ‚

**å»ºè®®**ï¼šé‡‡ç”¨é€‰é¡¹Bï¼ˆåŠè‡ªåŠ¨ç”Ÿæˆï¼‰

---

## âš ï¸ é£é™©å’ŒæŒ‘æˆ˜

### 1. æŠ€æœ¯é£é™©

| é£é™©é¡¹ | é£é™©ç­‰çº§ | å½±å“ | åº”å¯¹æªæ–½ |
|--------|---------|------|---------|
| **åŠ¨æ€SQLæ³¨å…¥** | é«˜ | å®‰å…¨æ¼æ´ | ä¸¥æ ¼çš„å‚æ•°éªŒè¯å’ŒSQLè½¬ä¹‰ |
| **æ€§èƒ½é—®é¢˜** | ä¸­ | ç”¨æˆ·ä½“éªŒå·® | ç¼“å­˜ç­–ç•¥ã€æŸ¥è¯¢ä¼˜åŒ– |
| **å…ƒæ•°æ®ä¸€è‡´æ€§** | ä¸­ | æ•°æ®é”™è¯¯ | äº‹åŠ¡æ§åˆ¶ã€ç‰ˆæœ¬ç®¡ç† |
| **å‰ç«¯æ¸²æŸ“æ€§èƒ½** | ä¸­ | é¡µé¢å¡é¡¿ | è™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ |
| **åˆ†å¸ƒå¼äº‹åŠ¡** | é«˜ | æ•°æ®ä¸ä¸€è‡´ | Sagaæ¨¡å¼ã€è¡¥å¿æœºåˆ¶ |

### 2. ä¸šåŠ¡é£é™©

| é£é™©é¡¹ | é£é™©ç­‰çº§ | å½±å“ | åº”å¯¹æªæ–½ |
|--------|---------|------|---------|
| **éœ€æ±‚å˜æ›´** | é«˜ | å¼€å‘å»¶æœŸ | æ•æ·å¼€å‘ã€å¿«é€Ÿè¿­ä»£ |
| **ç”¨æˆ·å­¦ä¹ æˆæœ¬** | ä¸­ | æ¨å¹¿å›°éš¾ | å®Œå–„æ–‡æ¡£ã€æä¾›åŸ¹è®­ |
| **æ•°æ®è¿ç§»** | ä¸­ | ä¸šåŠ¡ä¸­æ–­ | ç°åº¦å‘å¸ƒã€æ•°æ®å¤‡ä»½ |
| **å…¼å®¹æ€§é—®é¢˜** | ä½ | åŠŸèƒ½å—é™ | å……åˆ†æµ‹è¯•ã€é™çº§æ–¹æ¡ˆ |

### 3. å›¢é˜Ÿé£é™©

| é£é™©é¡¹ | é£é™©ç­‰çº§ | å½±å“ | åº”å¯¹æªæ–½ |
|--------|---------|------|---------|
| **æŠ€æœ¯èƒ½åŠ›ä¸è¶³** | ä¸­ | è´¨é‡é—®é¢˜ | æŠ€æœ¯åŸ¹è®­ã€ä»£ç å®¡æŸ¥ |
| **äººå‘˜æµåŠ¨** | ä¸­ | è¿›åº¦å»¶è¯¯ | çŸ¥è¯†æ²‰æ·€ã€æ–‡æ¡£å®Œå–„ |
| **æ²Ÿé€šä¸ç•…** | ä½ | ç†è§£åå·® | å®šæœŸä¼šè®®ã€éœ€æ±‚ç¡®è®¤ |

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### 1. æŠ€æœ¯æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|---------|
| **APIå“åº”æ—¶é—´** | < 200ms | æ€§èƒ½ç›‘æ§ |
| **é¡µé¢åŠ è½½æ—¶é—´** | < 2s | å‰ç«¯ç›‘æ§ |
| **æ•°æ®åº“æŸ¥è¯¢æ—¶é—´** | < 100ms | æ…¢æŸ¥è¯¢æ—¥å¿— |
| **ç³»ç»Ÿå¯ç”¨æ€§** | > 99.9% | ç›‘æ§å‘Šè­¦ |
| **ä»£ç è¦†ç›–ç‡** | > 80% | å•å…ƒæµ‹è¯• |

### 2. ä¸šåŠ¡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|---------|
| **åº”ç”¨åˆ›å»ºæ—¶é—´** | < 30åˆ†é’Ÿ | ç”¨æˆ·åé¦ˆ |
| **å¼€å‘æ•ˆç‡æå‡** | > 50% | å¯¹æ¯”ä¼ ç»Ÿå¼€å‘ |
| **ç”¨æˆ·æ»¡æ„åº¦** | > 4.5/5 | ç”¨æˆ·è°ƒç ” |
| **Bugæ•°é‡** | < 5ä¸ª/æœˆ | Bugè¿½è¸ªç³»ç»Ÿ |

---

## ğŸ“š å‚è€ƒèµ„æ–™

### 1. å…ƒæ•°æ®é©±åŠ¨

- [JSON Schema](https://json-schema.org/)
- [OpenAPI Specification](https://swagger.io/specification/)
- [GraphQL Schema](https://graphql.org/learn/schema/)

### 2. æ¨¡å‹é©±åŠ¨

- [SQLAlchemy Dynamic Models](https://docs.sqlalchemy.org/en/14/orm/mapping_api.html)
- [Django Dynamic Models](https://docs.djangoproject.com/en/4.0/topics/db/models/)
- [Prisma Schema](https://www.prisma.io/docs/concepts/components/prisma-schema)

### 3. å‰ç«¯æ¸²æŸ“

- [Vue Dynamic Components](https://vuejs.org/guide/essentials/component-basics.html#dynamic-components)
- [React Dynamic Components](https://reactjs.org/docs/jsx-in-depth.html#choosing-the-type-at-runtime)
- [FormRender](https://x-render.gitee.io/form-render)
- [Amis](https://aisuda.bce.baidu.com/amis/zh-CN/docs/index)

### 4. BPMNå¼•æ“

- [Camunda](https://camunda.com/)
- [Flowable](https://www.flowable.com/)
- [Activiti](https://www.activiti.org/)
- [BPMN.js](https://bpmn.io/)

### 5. ä½ä»£ç å¹³å°

- [Dify](https://dify.ai/)
- [Appsmith](https://www.appsmith.com/)
- [Budibase](https://budibase.com/)
- [ToolJet](https://www.tooljet.com/)

---

## ğŸ¯ æ€»ç»“

### å·²å®ç°åŠŸèƒ½ï¼ˆçº¦30%ï¼‰âœ…

1. **æ•°æ®å­˜å‚¨è®¾è®¡**ï¼ˆ100%ï¼‰
   - âœ… å…ƒæ•°æ®æ•°æ®åº“ï¼ˆPostgreSQLï¼‰
   - âœ… è¿è¡Œæ—¶æ•°æ®åº“ï¼ˆå¤šç§Ÿæˆ·æ¶æ„ï¼‰
   - âœ… ç¼“å­˜è®¾è®¡ï¼ˆRedisï¼‰
   - âœ… æ–‡ä»¶å­˜å‚¨ï¼ˆMongoDB GridFSï¼‰

2. **æµç¨‹å¼•æ“**ï¼ˆ40%ï¼‰
   - âœ… åŸºç¡€BPMå¼•æ“
   - âœ… ä»»åŠ¡ç®¡ç†
   - âš ï¸ å¼‚æ­¥å¤„ç†ï¼ˆéƒ¨åˆ†ï¼‰
   - âŒ å®Œæ•´BPMN 2.0è§„èŒƒ
   - âŒ å¯è§†åŒ–è®¾è®¡å™¨

### æœªå®ç°åŠŸèƒ½ï¼ˆçº¦70%ï¼‰âŒ

1. **å…ƒæ•°æ®é©±åŠ¨å¼•æ“**ï¼ˆ0%ï¼‰
   - âŒ ç»Ÿä¸€å…ƒæ•°æ®æ¨¡å‹
   - âŒ å…ƒæ•°æ®è§£æä¸åŠ è½½

2. **æ¨¡å‹é©±åŠ¨å¼•æ“**ï¼ˆ0%ï¼‰
   - âŒ DDLåŒæ­¥æœºåˆ¶
   - âŒ åŠ¨æ€ORMå’ŒAPIç”Ÿæˆ

3. **æ¸²æŸ“å¼•æ“**ï¼ˆ0%ï¼‰
   - âŒ å‰ç«¯åŠ¨æ€æ¸²æŸ“
   - âŒ å¤šç«¯é€‚é…

### å®æ–½å»ºè®®

1. **ç«‹å³å¼€å§‹**ï¼šå…ƒæ•°æ®åŸºç¡€è®¾æ–½ï¼ˆç¬¬ä¸€ä¼˜å…ˆçº§ï¼‰
2. **å¹¶è¡Œå¼€å‘**ï¼šæ¨¡å‹é©±åŠ¨å¼•æ“å’Œæ¸²æŸ“å¼•æ“ï¼ˆç¬¬äºŒä¼˜å…ˆçº§ï¼‰
3. **é€æ­¥å¢å¼º**ï¼šBPMNå¼•æ“ï¼ˆç¬¬ä¸‰ä¼˜å…ˆçº§ï¼‰
4. **æŒç»­ä¼˜åŒ–**ï¼šæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

### é¢„æœŸæ”¶ç›Š

- **å¼€å‘æ•ˆç‡**ï¼šæå‡50%ä»¥ä¸Š
- **ç»´æŠ¤æˆæœ¬**ï¼šé™ä½40%
- **ä¸šåŠ¡å“åº”**ï¼šä»å‘¨çº§åˆ°å¤©çº§
- **ç”¨æˆ·æ»¡æ„åº¦**ï¼šæ˜¾è‘—æå‡

### å…³é”®æˆåŠŸå› ç´ 

1. **æŠ€æœ¯é€‰å‹æ­£ç¡®**ï¼šé€‰æ‹©æˆç†Ÿçš„æŠ€æœ¯æ–¹æ¡ˆ
2. **æ¶æ„è®¾è®¡åˆç†**ï¼šåˆ†å±‚æ¸…æ™°ï¼ŒèŒè´£æ˜ç¡®
3. **å›¢é˜Ÿèƒ½åŠ›åŒ¹é…**ï¼šå…·å¤‡ç›¸å…³æŠ€æœ¯ç»éªŒ
4. **éœ€æ±‚ç†è§£æ·±å…¥**ï¼šå……åˆ†ç†è§£ä½ä»£ç å¹³å°çš„æœ¬è´¨
5. **æŒç»­è¿­ä»£ä¼˜åŒ–**ï¼šå¿«é€Ÿå“åº”ç”¨æˆ·åé¦ˆ

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**åˆ›å»ºæ—¥æœŸ**ï¼š2024-12-02  
**æœ€åæ›´æ–°**ï¼š2024-12-02  
**ä½œè€…**ï¼šAI Assistant  
**å®¡æ ¸çŠ¶æ€**ï¼šå¾…å®¡æ ¸

---

## é™„å½•ï¼šå¿«é€Ÿå‚è€ƒ

### A. æ ¸å¿ƒæ¦‚å¿µå¯¹ç…§è¡¨

| å›¾ä¸­æœ¯è¯­ | å½“å‰å®ç° | å¯¹åº”æ–‡ä»¶/æ¨¡å— |
|---------|---------|--------------|
| å…ƒæ•°æ®æ•°æ®åº“ | PostgreSQLï¼ˆ37å¼ è¡¨ï¼‰ | `api/app/models/` |
| è¿è¡Œæ—¶æ•°æ®åº“ | å¤šç§Ÿæˆ·æ¶æ„ | `workspace_id`éš”ç¦» |
| å…ƒæ•°æ®é©±åŠ¨å¼•æ“ | âŒ æœªå®ç° | éœ€è¦æ–°å»º |
| æ¨¡å‹é©±åŠ¨å¼•æ“ | âŒ æœªå®ç° | éœ€è¦æ–°å»º |
| DDLåŒæ­¥æœºåˆ¶ | Alembicï¼ˆé™æ€ï¼‰ | `alembic/versions/` |
| åŠ¨æ€ORM | âŒ æœªå®ç° | éœ€è¦æ–°å»º |
| æ¸²æŸ“å¼•æ“ | âŒ æœªå®ç° | éœ€è¦æ–°å»º |
| BPMNå¼•æ“ | è‡ªç ”åŸºç¡€ç‰ˆ | `api/app/models/bpm/` |
| ç¼“å­˜è®¾è®¡ | Redis | `api/app/core/redis.py` |
| æ–‡ä»¶å­˜å‚¨ | MongoDB GridFS | `api/app/models/file/` |

### B. å®æ–½æ£€æŸ¥æ¸…å•

#### é˜¶æ®µä¸€ï¼šå…ƒæ•°æ®åŸºç¡€è®¾æ–½
- [ ] è®¾è®¡å…ƒæ•°æ®æ¨¡å‹Schema
- [ ] åˆ›å»º6å¼ å…ƒæ•°æ®è¡¨
- [ ] å®ç°å…ƒæ•°æ®CRUD API
- [ ] å®ç°å…ƒæ•°æ®è§£æå™¨
- [ ] å®ç°å…ƒæ•°æ®åŠ è½½å™¨
- [ ] å®ç°å…ƒæ•°æ®ç¼“å­˜

#### é˜¶æ®µäºŒï¼šæ¨¡å‹é©±åŠ¨å¼•æ“
- [ ] å¼€å‘DDLç”Ÿæˆå™¨
- [ ] å®ç°è¡¨ç»“æ„åŒæ­¥
- [ ] å¼€å‘åŠ¨æ€ORM
- [ ] å®ç°é€šç”¨CRUDæœåŠ¡
- [ ] å¼€å‘APIç”Ÿæˆå™¨
- [ ] å®ç°æŸ¥è¯¢æ„å»ºå™¨

#### é˜¶æ®µä¸‰ï¼šæ¸²æŸ“å¼•æ“
- [ ] è®¾è®¡ç»„ä»¶Schema
- [ ] å¼€å‘ç»„ä»¶æ¸²æŸ“å™¨
- [ ] å®ç°è¡¨è¾¾å¼è§£æå™¨
- [ ] å®ç°äº‹ä»¶ç»‘å®š
- [ ] å®ç°æ•°æ®ç»‘å®š
- [ ] å¼€å‘å¤šç«¯é€‚é…å™¨

#### é˜¶æ®µå››ï¼šBPMNå¢å¼º
- [ ] å®ç°BPMN 2.0å…ƒç´ 
- [ ] å¼€å‘BPMNè§£æå™¨
- [ ] é›†æˆå¯è§†åŒ–è®¾è®¡å™¨
- [ ] å®ç°åˆ†å¸ƒå¼äº‹åŠ¡
- [ ] å®ç°è¡¥å¿æœºåˆ¶

### C. è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥è®¨è®ºï¼Œè¯·è”ç³»ï¼š
- é¡¹ç›®è´Ÿè´£äººï¼š[å¾…å¡«å†™]
- æŠ€æœ¯è´Ÿè´£äººï¼š[å¾…å¡«å†™]
- æ–‡æ¡£ç»´æŠ¤ï¼š[å¾…å¡«å†™]

